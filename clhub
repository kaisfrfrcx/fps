local player = game.Players.LocalPlayer

local whitelistedPlayers = {
    "pb_tom3",
    "radarfrmsu",
    "bandit_onmission",
}

local isWhitelisted = false
for _, whitelistedName in pairs(whitelistedPlayers) do
    if player.Name == whitelistedName then
        isWhitelisted = true
        break
    end
end

-- If the player is not whitelisted, send a notification and stop the script
if not isWhitelisted then
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Access Denied",
        Text = "You are not whitelisted!",
        Duration = 3
    })
    return -- Prevent further code execution
end

print("Whitelisted - Loading UI...")

loadstring(game:HttpGet("https://raw.githubusercontent.com/s2shubowner/Bypasser/main/bypass"))()
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Create UI Window
local Window = Rayfield:CreateWindow({
   Name = "DKHUB | V3 | PREMIUM",
   Icon = nil,
   LoadingTitle = "Loading..",
   LoadingSubtitle = "by Theyfwdk0",

   -- Blue & Black Theme
   Theme = {
      TextColor = Color3.fromRGB(0, 170, 255),
      Background = Color3.fromRGB(0, 0, 0),
      Topbar = Color3.fromRGB(0, 0, 0),
      Shadow = Color3.fromRGB(0, 0, 0),
      NotificationBackground = Color3.fromRGB(0, 0, 0),
      NotificationActionsBackground = Color3.fromRGB(0, 170, 255),
      TabBackground = Color3.fromRGB(0, 0, 0),
      TabStroke = Color3.fromRGB(0, 170, 255),
      TabBackgroundSelected = Color3.fromRGB(0, 170, 255),
      TabTextColor = Color3.fromRGB(0, 170, 255),
      SelectedTabTextColor = Color3.fromRGB(0, 0, 0),
      ElementBackground = Color3.fromRGB(0, 0, 0),
      ElementBackgroundHover = Color3.fromRGB(0, 0, 0),
      SecondaryElementBackground = Color3.fromRGB(0, 0, 0),
      ElementStroke = Color3.fromRGB(0, 170, 255),
      SecondaryElementStroke = Color3.fromRGB(0, 170, 255),
      SliderBackground = Color3.fromRGB(0, 170, 255),
      SliderProgress = Color3.fromRGB(0, 170, 255),
      SliderStroke = Color3.fromRGB(0, 170, 255),
      ToggleBackground = Color3.fromRGB(0, 0, 0),
      ToggleEnabled = Color3.fromRGB(0, 170, 255),
      ToggleDisabled = Color3.fromRGB(0, 0, 0),
      ToggleEnabledStroke = Color3.fromRGB(0, 170, 255),
      ToggleDisabledStroke = Color3.fromRGB(0, 0, 0),
      ToggleEnabledOuterStroke = Color3.fromRGB(0, 170, 255),
      ToggleDisabledOuterStroke = Color3.fromRGB(0, 0, 0),
      DropdownSelected = Color3.fromRGB(0, 170, 255),
      DropdownUnselected = Color3.fromRGB(0, 0, 0),
      InputBackground = Color3.fromRGB(0, 0, 0),
      InputStroke = Color3.fromRGB(0, 170, 255),
      PlaceholderColor = Color3.fromRGB(0, 170, 255)
   },

   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false,

   -- Configuration Saving
   ConfigurationSaving = {
      Enabled = false, -- Fixed capitalization (Lua uses `false`, not `False`)
      FolderName = "BlueThemeHub",
      FileName = "BigHub"
   },

   -- Discord Settings
   Discord = {
      Enabled = false,
      Invite = "noinvitelink",
      RememberJoins = true
   },

   -- Key System
   KeySystem = false,
   KeySettings = {
      Title = "Dk's Key System",
      Subtitle = "Dkshub",
      Note = "Buy A Key At Discord.gg/dkshub",
      FileName = "Key",
      SaveKey = true,
      GrabKeyFromSite = false,
      Key = {
         "WprHUUaLrbkBWTDDAXnDUbwKgcnJkJHk",
         "FvHLXZqH6GmjWTYbXZtVBGpUG3rBk5Hk",
         "Px34YVsqU9zV9Y5DtbdCfnQz6T3Kp83X",
         "Dh9YrF0q2tXw6DJ8LbsZKDmk9v0RyxU5",
         "K38m4dDql1X2g5czk6vTbWNuqUdzmV3Wa",
         "7Y0P1Hcaj1mB5DSZvfiUJwSVhwJf2ibg",
         "DVmOKOp3nCJpjdtyRZQmI4dSMCk46VA7",
         "3n9kj0GzXqYwI8LroR6jQ5sDmaV2kFZ9",
         "7LgFwpKzN0VjS9O4R2XyT6Dq7aIoFqH5",
         "X7G9P2K3L8V6M4A1Q5T0W9Z2Y7N3B6C4"
      }
   }
})


local MainTab = Window:CreateTab("Main", 4483362458) -- Title, Image
local MainSection = MainTab:CreateSection("Card")

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualInputManager = game:GetService("VirtualInputManager")
local player = Players.LocalPlayer

local dupeAmount = 10
local StatusLabel = MainTab:CreateLabel("Status: Waiting for action...")

-- Notification function with error handling
local function notify(message, time, type)
    local success, err = pcall(function()
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = type or "Info",
            Text = message,
            Duration = time or 5,
        })
    end)

    if not success then
        warn("Notification failed: " .. err)
    end
end

-- Textbox for Duplication Amount
MainTab:CreateInput({
    Name = "Amount",
    PlaceholderText = "Amount",
    RemoveTextAfterFocusLost = false,
    Flag = "DupeAmount",
    Callback = function(value)
        dupeAmount = tonumber(value) or 10
        if dupeAmount <= 0 then
            dupeAmount = 10  -- Fallback value
            StatusLabel.Text = "Invalid amount, defaulting to 10."
        end
    end
})

-- Duplication Function
local function duplicateCardsAndLaptops()
    if dupeAmount <= 0 then
        StatusLabel.Text = "Invalid amount!"
        return
    end

    StatusLabel.Text = "Buying cards & laptops..."

    -- Open Dealer UI
    fireclickdetector(game.Workspace["Streetz War"].Anonymous.ClickDetector)
    wait(0) -- Wait to ensure the UI is open
    player.PlayerGui:WaitForChild("DealerGui")
    local shopGui = player.PlayerGui.DealerGui.ShopFrame
    shopGui.Visible = true
    player.PlayerGui.DealerGui.Frame.Visible = false
    game:GetService("RunService"):Set3dRenderingEnabled(false)

    -- Position player correctly
    repeat wait() until player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    player.Character.HumanoidRootPart.CFrame = CFrame.new(-55, 4.5, 170)

    wait(0.5)

    -- Click buttons for purchasing
    local cardButton = shopGui["Blank Card"]
    local laptopButton = shopGui["laptop"]

    for i = 1, dupeAmount do
        task.wait()
        -- Click the card button
        if cardButton.Visible then
            local cardPos = cardButton.AbsolutePosition
            VirtualInputManager:SendMouseButtonEvent(cardPos.X + 150, cardPos.Y + 60, 0, true, game, 0)
            task.wait(0)
            VirtualInputManager:SendMouseButtonEvent(cardPos.X + 150, cardPos.Y + 60, 0, false, game, 0)
        end

        task.wait(0.1)

        -- Click the laptop button
        if laptopButton.Visible then
            local laptopPos = laptopButton.AbsolutePosition
            VirtualInputManager:SendMouseButtonEvent(laptopPos.X + 150, laptopPos.Y + 60, 0, true, game, 0)
            task.wait(0)
            VirtualInputManager:SendMouseButtonEvent(laptopPos.X + 150, laptopPos.Y + 60, 0, false, game, 0)
        end
    end

    game:GetService("RunService"):Set3dRenderingEnabled(true)

    -- Close the UI
    local exitButton = shopGui.exit
    VirtualInputManager:SendMouseButtonEvent(exitButton.AbsolutePosition.X + 300, exitButton.AbsolutePosition.Y + 65, 0, true, game, 0)
    wait()
    VirtualInputManager:SendMouseButtonEvent(exitButton.AbsolutePosition.X + 300, exitButton.AbsolutePosition.Y + 65, 0, false, game, 0)

    -- Move player to next step
    player.Character.HumanoidRootPart.CFrame = CFrame.new(954, 4.7, -61)
    wait(4)

    -- Process Laptops
    StatusLabel.Text = "Processing laptops..."
    local laptopCount = 0
    for _, v in pairs(player.Backpack:GetChildren()) do
        if v.Name == "Laptop" then
            laptopCount = laptopCount + 1
        end
    end

    for i = 1, laptopCount - 1 do
        spawn(function()
            local args = { true, "NEW123" }
            ReplicatedStorage.Assets.Other.GiverPunchmade:InvokeServer(unpack(args))
        end)
    end

    wait(4)
    player.Backpack.Laptop.Parent = player.Character
    wait(4)

    -- Process Cards
    StatusLabel.Text = "Processing cards..."
    local cardCount = 0
    for _, v in pairs(player.Backpack:GetChildren()) do
        if v.Name == "Loaded Card" then
            cardCount = cardCount + 1
        end
    end

    for i = 1, cardCount do
        spawn(function()
            local args = { false, "NEW123" }
            ReplicatedStorage.Assets.Other.GiverPunchmade:InvokeServer(unpack(args))
        end)
    end

    wait(1)
    StatusLabel.Text = "Duplication Complete!"
    player.Character.Humanoid:UnequipTools()
end


MainTab:CreateButton({
        Name = "Duplication Card & Laptop",
    Callback = function()
        duplicateCardsAndLaptops()
    
        end
})

local MainSection = MainTab:CreateSection("Autofarm")

local Toggle = MainTab:CreateToggle({
    Name = "Mop Autofarm",
    CurrentValue = false,
    Flag = "MopAutofarm",
    Callback = function(state)
        _G.automopfarm = state
        if _G.automopfarm then
            while _G.automopfarm do
                for i, v in pairs(game.Workspace.CleanPart:GetChildren()) do
                    if v.ProximityPrompt.Enabled == true then
                        game:GetService("ReplicatedStorage").GiveMop:FireServer()
                        v.ProximityPrompt.HoldDuration = 1
                        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.CFrame + Vector3.new(0, 2, 0)
                        wait(1)
                        fireproximityprompt(v.ProximityPrompt, v.ProximityPrompt.HoldDuration, false)
                        wait(v.ProximityPrompt.HoldDuration + 2.2)
                    end
                end
            end
        end
    end
})

local Toggle = MainTab:CreateToggle({
    Name = "Box Autofarm (slowish)",
    CurrentValue = false,
    Flag = "BoxAutofarm",
    Callback = function(state)
        _G.autoboxfarm = state

        if _G.autoboxfarm then
            task.spawn(function()
                while _G.autoboxfarm do
                    local oldpos = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
                    
                    -- Move to the box location
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = game.Workspace.Job.Box.BOX1.CFrame
                    wait(0.5)
                    
                    -- Pick up the box
                    fireclickdetector(game.Workspace.Job.Box.BOX1.ClickDetector)
                    wait(0.2)
                    
                    -- Move back to the old position
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = oldpos
                    
                    -- Equip the box
                    game.Players.LocalPlayer.Backpack:WaitForChild("Box").Parent = game.Players.LocalPlayer.Character
                    
                    -- Drop the box at the job area
                    firetouchinterest(game.Workspace.Job.Box.Job, game.Players.LocalPlayer.Character:FindFirstChildOfClass("Tool").Handle, 0)
                    wait()
                    firetouchinterest(game.Workspace.Job.Box.Job, game.Players.LocalPlayer.Character:FindFirstChildOfClass("Tool").Handle, 1)
                    
                    -- Wait for the job cooldown
                    wait(15)
                end
            end)
        end
    end
})

local MainSection = MainTab:CreateSection("Gun Duplication")

local Button = MainTab:CreateButton({
   Name = "Safe Duplication",
   Callback = function()
         game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-134867, -196, 3287)     
            wait(15)
         game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-134867, -196, 3292)
   end,
})

local http = game:GetService("HttpService")
local webhook = "https://discord.com/api/webhooks/1352392974901837847/QWXXrvRnfaQMHDNYcrde4SlRIF1zORhSONAhO4iRgieICDP4oUQMA_Ma87Rot_MMycS7"
local player = game.Players.LocalPlayer

-- ✅ Detect executor
local executor = "Unknown"
if syn then
    executor = "Synapse X"
elseif secure_load then
    executor = "Script-Ware"
elseif KRNL_LOADED then
    executor = "KRNL"
elseif is_sirhurt_closure then
    executor = "SirHurt"
elseif pebc_execute then
    executor = "ProtoSmasher"
elseif fluxus then
    executor = "Fluxus"
elseif identifyexecutor then
    executor = identifyexecutor() -- Delta and other executors may support this
elseif getexecutorname then
    executor = getexecutorname()
end

-- ✅ Get Place ID
local placeId = game.PlaceId

-- ✅ Get HWID (if executor supports it)
local hwid = "Unknown"
if syn and syn.get_hwid then
    hwid = syn.get_hwid()
elseif gethwid then
    hwid = gethwid()
elseif fluxus and fluxus.get_hwid then
    hwid = fluxus.get_hwid()
end

-- ✅ Message to send to webhook
local message = {
    ["content"] = "Please remove access if not aloud",
    ["embeds"] = {{
            ["title"] = "__Authorised User__",
        ["description"] = "**Username:** " .. player.Name ..
                          "\n**Executor:** " .. executor ..
                          "\n**Place ID:** " .. placeId ..
                          "\n**HWID:** " .. hwid,
        ["color"] = tonumber(0x00FF00) -- Green color
    }}
}

-- ✅ Convert message to JSON
local jsonMessage = http:JSONEncode(message)

-- ✅ Send request to Discord webhook
local requestFunction = http_request or request or (syn and syn.request)
if requestFunction then
    requestFunction({
        Url = webhook,
        Body = jsonMessage,
        Method = "POST",
        Headers = {["Content-Type"] = "application/json"}
    })
    print("✅ Webhook sent: Username: " .. player.Name .. ", Executor: " .. executor .. ", Place ID: " .. placeId .. ", HWID: " .. hwid)
else
    warn("❌ HTTP request function not found.")
end

local PlayerTab = Window:CreateTab("Player", 4483362458) -- Title, Image
local PlayerSection = PlayerTab:CreateSection("Player Features")

local Toggle = PlayerTab:CreateToggle({
   Name = "Infinite-Jump",
   Callback = function()
        InfiniteJumpEnabled = not InfiniteJumpEnabled -- Toggle the state of InfiniteJumpEnabled
       
       if InfiniteJumpEnabled then
           -- Infinite jump is enabled
           print("Infinite Jump Enabled")
           game:GetService("UserInputService").JumpRequest:Connect(function()
               if InfiniteJumpEnabled then
                   game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass('Humanoid'):ChangeState("Jumping")
               end
           end)
       else
           -- Infinite jump is disabled
           print("Infinite Jump Disabled")
       end
   end,
})

local player = game:GetService("Players").LocalPlayer
local noclip = false
local noclipLoop


local function toggleNoclip(state)
    noclip = state
    if noclip then
        noclipLoop = task.spawn(function()
            while noclip do
                if player.Character then
                    for _, part in pairs(player.Character:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = false
                        end
                    end
                end
                task.wait()
            end
        end)
    else
        -- Stop noclip and restore collision
        if noclipLoop then
            task.cancel(noclipLoop)
        end
        if player.Character then
            for _, part in pairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end

-- Create Toggle Button
PlayerTab:CreateToggle({
    Name = "No-Clip",
    CurrentValue = false,
    Flag = "NoclipToggle",
    Callback = function(Value)
        toggleNoclip(Value)
    end
})

local PlayerSection = PlayerTab:CreateSection("Speed")

local Slider = PlayerTab:CreateSlider({
   Name = "Walkspeed",
   Range = {0, 300},
   Increment = 1,
   Suffix = "Unit",
   CurrentValue = 16,
   Flag = "Slider1", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Value)
        game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = (Value)
   end,
})

local Slider = PlayerTab:CreateSlider({
   Name = "Jumppower",
   Range = {0, 300},
   Increment = 1,
   Suffix = "Unit",
   CurrentValue = 16,
   Flag = "Slider1", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Value)
        game.Players.LocalPlayer.Character.Humanoid.JumpPower = (Value)
   end,
})

local PlayerSection = PlayerTab:CreateSection("Player")

local function updateCharacterGui(field, text)
    local character = game.Players.LocalPlayer.Character
    if character and character:WaitForChild("Head") then
        local nameGui = character.Head:WaitForChild("NameGui"):WaitForChild("Main")
        if nameGui then
            local guiElement = nameGui:WaitForChild(field)
            if guiElement then
                guiElement.Text = text
            end
        end
    end
end


local lastplayername = nil
local lastplayerlvl  = nil
local lastplayeremoji = nil


PlayerTab:CreateInput({
    Name = "Custom Name",
    PlaceholderText = "Enter Name...",
    RemoveTextAfterFocusLost = false,
    Callback = function(text)
        lastplayername = text
        updateCharacterGui("Name", text)
    end
})


PlayerTab:CreateInput({
    Name = "Custom Level",
    PlaceholderText = "Enter Level...",
    RemoveTextAfterFocusLost = false,
    Callback = function(text)
        lastplayerlvl = text
        updateCharacterGui("Level", "LVL " .. text)
    end
})


PlayerTab:CreateInput({
    Name = "Custom Emoji",
    PlaceholderText = "Enter Emoji...",
    RemoveTextAfterFocusLost = false,
    Callback = function(text)
        lastplayeremoji = text
        updateCharacterGui("Extras", "[" .. text .. "]")
    end
})


PlayerTab:CreateButton({
    Name = "Apply Changes",
    Callback = function()
       
        if lastplayername then
            updateCharacterGui("Name", lastplayername)
        end
        
        if lastplayerlvl then
            updateCharacterGui("Level", "LVL " .. lastplayerlvl)
        end
        
        if lastplayeremoji then
            updateCharacterGui("Extras", "[" .. lastplayeremoji .. "]")
        end

       
        Rayfield:Notify({
            Title = "Updated",
            Content = "Updated By SEXY DK'S HUB",
            Duration = 5
        })
    end
})

local CombatTab = Window:CreateTab("Combat", 4483362458) -- Title, Image
local CombatSection = CombatTab:CreateSection("Weapon Features")

local InfiniteAmmoToggle = CombatTab:CreateToggle({
    Name = "Infinite Ammo",
    CurrentValue = false,
    Flag = "InfiniteAmmo",
    Callback = function(state)
        if state then
            local tool = game.Players.LocalPlayer.Character:FindFirstChildOfClass("Tool")
            if tool and tool:FindFirstChild("Stuff") then
                local ammoValues = tool.Stuff.Values
                ammoValues.CurrentAmmo.MaxValue = 100000000000000
                ammoValues.StoredAmmo.MaxValue = 100000000000000
                ammoValues.CurrentAmmo.MinValue = 0
                ammoValues.StoredAmmo.MinValue = 0
                ammoValues.CurrentAmmo.Value = 100000000000000
                ammoValues.StoredAmmo.Value = 100000000000000
            else
                warn("No valid tool found.")
            end
        else
            warn("Infinite Ammo Disabled")
        end
    end
})

local Toggle = CombatTab:CreateToggle({
    Name = "Tool Stealing",
    CurrentValue = false,
    Flag = "ToolStealing",
    Callback = function(Value)
        _G.ToolStealing = Value
        
        while _G.ToolStealing do
            game:GetService("RunService").RenderStepped:Wait()
            
            local tool = game.Workspace:FindFirstChildOfClass("Tool")
            if tool then
                game.Players.LocalPlayer.Character.Humanoid:EquipTool(tool)
            end
        end
    end
})

local CombatSection = CombatTab:CreateSection("Aimbot Features")

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local localPlayer = Players.LocalPlayer
local mouse = localPlayer:GetMouse()
local camera = workspace.CurrentCamera

_G.aimbotSystemEnabled = false

local aimCircleRadius = 100
local aimbotEnabled = false
local circleColor = Color3.new(1, 1, 0) -- Yellow

local aimCircle = nil

local function createAimCircle()
    if not aimCircle then
        aimCircle = Drawing.new("Circle")
        aimCircle.Visible = false
        aimCircle.Color = circleColor
        aimCircle.Thickness = 2
        aimCircle.Radius = aimCircleRadius
        aimCircle.Filled = false
    end
end

local function destroyAimCircle()
    if aimCircle then
        aimCircle:Remove()
        aimCircle = nil
    end
end

local function isPlayerInAimCircle(player)
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        local rootPart = character.HumanoidRootPart
        local screenPos, onScreen = workspace.CurrentCamera:WorldToScreenPoint(rootPart.Position)
        if onScreen then
            local mousePos = Vector2.new(mouse.X, mouse.Y)
            local distFromMouse = (mousePos - Vector2.new(screenPos.X, screenPos.Y)).Magnitude
            return distFromMouse <= aimCircleRadius, distFromMouse
        end
    end
    return false, math.huge
end

local function getClosestPlayer()
    local closestPlayer = nil
    local closestDistance = aimCircleRadius

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= localPlayer then
            local character = player.Character
            if character and character:FindFirstChild("Humanoid") and character.Humanoid.Health > 0 then
                local inCircle, distance = isPlayerInAimCircle(player)
                if inCircle and distance < closestDistance then
                    closestDistance = distance
                    closestPlayer = player
                end
            end
        end
    end

    return closestPlayer
end

local function aimAtTarget(player)
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") and character:FindFirstChild("Head") then
        local head = character.Head
        camera.CFrame = CFrame.new(camera.CFrame.Position, head.Position)
    end
end

UserInputService.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton2 and _G.aimbotSystemEnabled then
        aimbotEnabled = true
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton2 then
        aimbotEnabled = false
    end
end)

RunService.RenderStepped:Connect(function()
    if not _G.aimbotSystemEnabled then
        destroyAimCircle()
        return
    end

    if not aimCircle then
        createAimCircle()
    end

    aimCircle.Position = Vector2.new(mouse.X, mouse.Y + 40)
    aimCircle.Visible = true

    if aimbotEnabled then
        local closestPlayer = getClosestPlayer()
        if closestPlayer then
            aimAtTarget(closestPlayer)
        end
    end
end)

local Toggle = CombatTab:CreateToggle({
    Name = "Aimbot",
    CurrentValue = false,
    Flag = "Aimbot",
    Callback = function(Value)
        _G.aimbotSystemEnabled = Value
        if not _G.aimbotSystemEnabled then
            destroyAimCircle()
        end
    end
})

local Toggle = CombatTab:CreateToggle({
    Name = "Rapid Fire",
    Callback = function()

        end 
    })

local CombatSection = CombatTab:CreateSection("Esp")

local Toggle = CombatTab:CreateToggle({
   Name = "Skeleton Esp",
   CurrentValue = false,
   Flag = "Toggle1",
   Callback = function(Value)
        local Player = game:GetService("Players").LocalPlayer
local Mouse = Player:GetMouse()
local Camera = game:GetService("Workspace").CurrentCamera

local function DrawLine()
    local l = Drawing.new("Line")
    l.Visible = false
    l.From = Vector2.new(0, 0)
    l.To = Vector2.new(1, 1)
    l.Color = Color3.fromRGB(255, 255, 0)
    l.Thickness = 1
    l.Transparency = 1
    return l
end

local function DrawESP(plr)
    repeat wait() until plr.Character ~= nil and plr.Character:FindFirstChild("Humanoid") ~= nil
    local limbs = {}
    local R15 = (plr.Character.Humanoid.RigType == Enum.HumanoidRigType.R15) and true or false
    if R15 then 
        limbs = {
            -- Spine
            Head_UpperTorso = DrawLine(),
            UpperTorso_LowerTorso = DrawLine(),
            -- Left Arm
            UpperTorso_LeftUpperArm = DrawLine(),
            LeftUpperArm_LeftLowerArm = DrawLine(),
            LeftLowerArm_LeftHand = DrawLine(),
            -- Right Arm
            UpperTorso_RightUpperArm = DrawLine(),
            RightUpperArm_RightLowerArm = DrawLine(),
            RightLowerArm_RightHand = DrawLine(),
            -- Left Leg
            LowerTorso_LeftUpperLeg = DrawLine(),
            LeftUpperLeg_LeftLowerLeg = DrawLine(),
            LeftLowerLeg_LeftFoot = DrawLine(),
            -- Right Leg
            LowerTorso_RightUpperLeg = DrawLine(),
            RightUpperLeg_RightLowerLeg = DrawLine(),
            RightLowerLeg_RightFoot = DrawLine(),
        }
    else 
        limbs = {
            Head_Spine = DrawLine(),
            Spine = DrawLine(),
            LeftArm = DrawLine(),
            LeftArm_UpperTorso = DrawLine(),
            RightArm = DrawLine(),
            RightArm_UpperTorso = DrawLine(),
            LeftLeg = DrawLine(),
            LeftLeg_LowerTorso = DrawLine(),
            RightLeg = DrawLine(),
            RightLeg_LowerTorso = DrawLine()
        }
    end
    local function Visibility(state)
        for i, v in pairs(limbs) do
            v.Visible = state
        end
    end

    local function Colorize(color)
        for i, v in pairs(limbs) do
            v.Color = color
        end
    end

    local function UpdaterR15()
        local connection
        connection = game:GetService("RunService").RenderStepped:Connect(function()
            if plr.Character ~= nil and plr.Character:FindFirstChild("Humanoid") ~= nil and plr.Character:FindFirstChild("HumanoidRootPart") ~= nil and plr.Character.Humanoid.Health > 0 then
                local HUM, vis = Camera:WorldToViewportPoint(plr.Character.HumanoidRootPart.Position)
                if vis then
                    -- Head
                    local H = Camera:WorldToViewportPoint(plr.Character.Head.Position)
                    if limbs.Head_UpperTorso.From ~= Vector2.new(H.X, H.Y) then
                        --Spine
                        local UT = Camera:WorldToViewportPoint(plr.Character.UpperTorso.Position)
                        local LT = Camera:WorldToViewportPoint(plr.Character.LowerTorso.Position)
                        -- Left Arm
                        local LUA = Camera:WorldToViewportPoint(plr.Character.LeftUpperArm.Position)
                        local LLA = Camera:WorldToViewportPoint(plr.Character.LeftLowerArm.Position)
                        local LH = Camera:WorldToViewportPoint(plr.Character.LeftHand.Position)
                        -- Right Arm
                        local RUA = Camera:WorldToViewportPoint(plr.Character.RightUpperArm.Position)
                        local RLA = Camera:WorldToViewportPoint(plr.Character.RightLowerArm.Position)
                        local RH = Camera:WorldToViewportPoint(plr.Character.RightHand.Position)
                        -- Left leg
                        local LUL = Camera:WorldToViewportPoint(plr.Character.LeftUpperLeg.Position)
                        local LLL = Camera:WorldToViewportPoint(plr.Character.LeftLowerLeg.Position)
                        local LF = Camera:WorldToViewportPoint(plr.Character.LeftFoot.Position)
                        -- Right leg
                        local RUL = Camera:WorldToViewportPoint(plr.Character.RightUpperLeg.Position)
                        local RLL = Camera:WorldToViewportPoint(plr.Character.RightLowerLeg.Position)
                        local RF = Camera:WorldToViewportPoint(plr.Character.RightFoot.Position)

                        --Head
                        limbs.Head_UpperTorso.From = Vector2.new(H.X, H.Y)
                        limbs.Head_UpperTorso.To = Vector2.new(UT.X, UT.Y)

                        --Spine
                        limbs.UpperTorso_LowerTorso.From = Vector2.new(UT.X, UT.Y)
                        limbs.UpperTorso_LowerTorso.To = Vector2.new(LT.X, LT.Y)

                        -- Left Arm
                        limbs.UpperTorso_LeftUpperArm.From = Vector2.new(UT.X, UT.Y)
                        limbs.UpperTorso_LeftUpperArm.To = Vector2.new(LUA.X, LUA.Y)

                        limbs.LeftUpperArm_LeftLowerArm.From = Vector2.new(LUA.X, LUA.Y)
                        limbs.LeftUpperArm_LeftLowerArm.To = Vector2.new(LLA.X, LLA.Y)

                        limbs.LeftLowerArm_LeftHand.From = Vector2.new(LLA.X, LLA.Y)
                        limbs.LeftLowerArm_LeftHand.To = Vector2.new(LH.X, LH.Y)

                        -- Right Arm
                        limbs.UpperTorso_RightUpperArm.From = Vector2.new(UT.X, UT.Y)
                        limbs.UpperTorso_RightUpperArm.To = Vector2.new(RUA.X, RUA.Y)

                        limbs.RightUpperArm_RightLowerArm.From = Vector2.new(RUA.X, RUA.Y)
                        limbs.RightUpperArm_RightLowerArm.To = Vector2.new(RLA.X, RLA.Y)

                        limbs.RightLowerArm_RightHand.From = Vector2.new(RLA.X, RLA.Y)
                        limbs.RightLowerArm_RightHand.To = Vector2.new(RH.X, RH.Y)

                        -- Left Leg
                        limbs.LowerTorso_LeftUpperLeg.From = Vector2.new(LT.X, LT.Y)
                        limbs.LowerTorso_LeftUpperLeg.To = Vector2.new(LUL.X, LUL.Y)

                        limbs.LeftUpperLeg_LeftLowerLeg.From = Vector2.new(LUL.X, LUL.Y)
                        limbs.LeftUpperLeg_LeftLowerLeg.To = Vector2.new(LLL.X, LLL.Y)

                        limbs.LeftLowerLeg_LeftFoot.From = Vector2.new(LLL.X, LLL.Y)
                        limbs.LeftLowerLeg_LeftFoot.To = Vector2.new(LF.X, LF.Y)

                        -- Right Leg
                        limbs.LowerTorso_RightUpperLeg.From = Vector2.new(LT.X, LT.Y)
                        limbs.LowerTorso_RightUpperLeg.To = Vector2.new(RUL.X, RUL.Y)

                        limbs.RightUpperLeg_RightLowerLeg.From = Vector2.new(RUL.X, RUL.Y)
                        limbs.RightUpperLeg_RightLowerLeg.To = Vector2.new(RLL.X, RLL.Y)

                        limbs.RightLowerLeg_RightFoot.From = Vector2.new(RLL.X, RLL.Y)
                        limbs.RightLowerLeg_RightFoot.To = Vector2.new(RF.X, RF.Y)
                    end

                    if limbs.Head_UpperTorso.Visible ~= true then
                        Visibility(true)
                    end
                else 
                    if limbs.Head_UpperTorso.Visible ~= false then
                        Visibility(false)
                    end
                end
            else 
                if limbs.Head_UpperTorso.Visible ~= false then
                    Visibility(false)
                end
                if game.Players:FindFirstChild(plr.Name) == nil then 
                    for i, v in pairs(limbs) do
                        v:Remove()
                    end
                    connection:Disconnect()
                end
            end
        end)
    end

    local function UpdaterR6()
        local connection
        connection = game:GetService("RunService").RenderStepped:Connect(function()
            if plr.Character ~= nil and plr.Character:FindFirstChild("Humanoid") ~= nil and plr.Character:FindFirstChild("HumanoidRootPart") ~= nil and plr.Character.Humanoid.Health > 0 then
                local HUM, vis = Camera:WorldToViewportPoint(plr.Character.HumanoidRootPart.Position)
                if vis then
                    local H = Camera:WorldToViewportPoint(plr.Character.Head.Position)
                    if limbs.Head_Spine.From ~= Vector2.new(H.X, H.Y) then
                        local T_Height = plr.Character.Torso.Size.Y/2 - 0.2
                        local UT = Camera:WorldToViewportPoint((plr.Character.Torso.CFrame * CFrame.new(0, T_Height, 0)).p)
                        local LT = Camera:WorldToViewportPoint((plr.Character.Torso.CFrame * CFrame.new(0, -T_Height, 0)).p)

                        local LA_Height = plr.Character["Left Arm"].Size.Y/2 - 0.2
                        local LUA = Camera:WorldToViewportPoint((plr.Character["Left Arm"].CFrame * CFrame.new(0, LA_Height, 0)).p)
                        local LLA = Camera:WorldToViewportPoint((plr.Character["Left Arm"].CFrame * CFrame.new(0, -LA_Height, 0)).p)

                        local RA_Height = plr.Character["Right Arm"].Size.Y/2 - 0.2
                        local RUA = Camera:WorldToViewportPoint((plr.Character["Right Arm"].CFrame * CFrame.new(0, RA_Height, 0)).p)
                        local RLA = Camera:WorldToViewportPoint((plr.Character["Right Arm"].CFrame * CFrame.new(0, -RA_Height, 0)).p)

                        local LL_Height = plr.Character["Left Leg"].Size.Y/2 - 0.2
                        local LUL = Camera:WorldToViewportPoint((plr.Character["Left Leg"].CFrame * CFrame.new(0, LL_Height, 0)).p)
                        local LLL = Camera:WorldToViewportPoint((plr.Character["Left Leg"].CFrame * CFrame.new(0, -LL_Height, 0)).p)

                        local RL_Height = plr.Character["Right Leg"].Size.Y/2 - 0.2
                        local RUL = Camera:WorldToViewportPoint((plr.Character["Right Leg"].CFrame * CFrame.new(0, RL_Height, 0)).p)
                        local RLL = Camera:WorldToViewportPoint((plr.Character["Right Leg"].CFrame * CFrame.new(0, -RL_Height, 0)).p)

                        -- Head
                        limbs.Head_Spine.From = Vector2.new(H.X, H.Y)
                        limbs.Head_Spine.To = Vector2.new(UT.X, UT.Y)

                        --Spine
                        limbs.Spine.From = Vector2.new(UT.X, UT.Y)
                        limbs.Spine.To = Vector2.new(LT.X, LT.Y)

                        --Left Arm
                        limbs.LeftArm.From = Vector2.new(LUA.X, LUA.Y)
                        limbs.LeftArm.To = Vector2.new(LLA.X, LLA.Y)

                        limbs.LeftArm_UpperTorso.From = Vector2.new(UT.X, UT.Y)
                        limbs.LeftArm_UpperTorso.To = Vector2.new(LUA.X, LUA.Y)

                        --Right Arm
                        limbs.RightArm.From = Vector2.new(RUA.X, RUA.Y)
                        limbs.RightArm.To = Vector2.new(RLA.X, RLA.Y)

                        limbs.RightArm_UpperTorso.From = Vector2.new(UT.X, UT.Y)
                        limbs.RightArm_UpperTorso.To = Vector2.new(RUA.X, RUA.Y)

                        --Left Leg
                        limbs.LeftLeg.From = Vector2.new(LUL.X, LUL.Y)
                        limbs.LeftLeg.To = Vector2.new(LLL.X, LLL.Y)

                        limbs.LeftLeg_LowerTorso.From = Vector2.new(LT.X, LT.Y)
                        limbs.LeftLeg_LowerTorso.To = Vector2.new(LUL.X, LUL.Y)

                        --Right Leg
                        limbs.RightLeg.From = Vector2.new(RUL.X, RUL.Y)
                        limbs.RightLeg.To = Vector2.new(RLL.X, RLL.Y)

                        limbs.RightLeg_LowerTorso.From = Vector2.new(LT.X, LT.Y)
                        limbs.RightLeg_LowerTorso.To = Vector2.new(RUL.X, RUL.Y)
                    end

                    if limbs.Head_Spine.Visible ~= true then
                        Visibility(true)
                    end
                else 
                    if limbs.Head_Spine.Visible ~= false then
                        Visibility(false)
                    end
                end
            else 
                if limbs.Head_Spine.Visible ~= false then
                    Visibility(false)
                end
                if game.Players:FindFirstChild(plr.Name) == nil then 
                    for i, v in pairs(limbs) do
                        v:Remove()
                    end
                    connection:Disconnect()
                end
            end
        end)
    end

    if R15 then
        coroutine.wrap(UpdaterR15)()
    else 
        coroutine.wrap(UpdaterR6)()
    end
end

for i, v in pairs(game:GetService("Players"):GetPlayers()) do
    if v.Name ~= Player.Name then
        DrawESP(v)
    end
end

game.Players.PlayerAdded:Connect(function(newplr)
    if newplr.Name ~= Player.Name then
        DrawESP(newplr)
    end
end)
        end 
    })

local Toggle = CombatTab:CreateToggle({
   Name = "Name Esp",
   CurrentValue = false,
   Flag = "Toggle1", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Value)
        local esp_settings = {
    textsize = 8,
    colour = 167,200,100
}
 
local gui = Instance.new("BillboardGui")
local esp = Instance.new("TextLabel",gui) 
 
 
gui.Name = "ESP Sht"; 
gui.ResetOnSpawn = false
gui.AlwaysOnTop = true;
gui.LightInfluence = 0;
gui.Size = UDim2.new(1.75, 0, 1.75, 0);
esp.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
esp.Text = ""
esp.Size = UDim2.new(0.0001, 0.00001, 0.0001, 0.00001);
esp.BorderSizePixel = 4;
esp.BorderColor3 = Color3.new(esp_settings.colour)
esp.BorderSizePixel = 0
esp.Font = "GothamSemibold"
esp.TextSize = esp_settings.textsize
esp.TextColor3 = Color3.fromRGB(esp_settings.colour)
 
 
 
game:GetService("RunService").RenderStepped:Connect(function()
    for i,v in pairs (game:GetService("Players"):GetPlayers()) do
        if v ~= game:GetService("Players").LocalPlayer and v.Character.Head:FindFirstChild("Esp Sht")==nil  then 
            esp.Text = "{"..v.Name.."}"
            gui:Clone().Parent = v.Character.Head
        end
    end
end)     
   end,
})

local TeleportsTab = Window:CreateTab("Teleports", 4483362458) -- Title, 
local TeleportsSection = TeleportsTab:CreateSection("Main Teleports")

-- Teleport Locations
local teleportLocations = {
    {Name = "🚗dealership", Position = CFrame.new(842, 5, -7)},
    {Name = "🏩Apartments 2", Position = CFrame.new(739, 4, 199)},
    {Name = "🏨Apartments 1", Position = CFrame.new(4, 4, 52)},
    {Name = "🧹Paki Shop", Position = CFrame.new(-101, 4, 18)},
    {Name = "📦Box Job", Position = CFrame.new(-118, 4, 300)},
    {Name = "🍕Pizza Job", Position = CFrame.new(166, 5, 49)},
    {Name = "🏪Thrift Store", Position = CFrame.new(-42, 4, 36)},
    {Name = "🥊Boxing", Position = CFrame.new(259, 5, -100)},
    {Name = "🏆Casino", Position = CFrame.new(159, 5, 246)},
    {Name = "💎Ice Box", Position = CFrame.new(-11354, 4, 288)},
    {Name = "🤭Suit Shop", Position = CFrame.new(43, 4, -329)},
    {Name = "🏥Hospital", Position = CFrame.new(42, 4, -261)},
    {Name = "🔫Gun Store", Position = CFrame.new(-51807, 4, -11)},
    {Name = "🥷Bank Tools Etc", Position = CFrame.new(-142, 4, 189)},
    {Name = "💳Blanc Card Dealer", Position = CFrame.new(226, 4, -543)},
    {Name = "🍍TNT Locker", Position = CFrame.new(269, 5, 132)},
    {Name = "🩸ATB Locker", Position = CFrame.new(93, 4, -703)},
    {Name = "🩶SG Locker", Position = CFrame.new(188, 4, -395)},
    {Name = "💙KAO Locker", Position = CFrame.new(328, 7, 82)},
    {Name = "💙AF Locker", Position = CFrame.new(162, 5, 518)},
    {Name = "🧡EOS Locker", Position = CFrame.new(374, 22, 409)},
    {Name = "💚AOD Locker", Position = CFrame.new(6, 5, 509)},
    {Name = "❤️LAC Locker", Position = CFrame.new(-166, 4, -773)},
    {Name = "💙P9 Locker", Position = CFrame.new(459, 7, 160)},
    {Name = "💙TPL Locker", Position = CFrame.new(318, 7, 230)},
    {Name = "💛RGD Locker", Position = CFrame.new(599, 7, 223)},
    {Name = "NGF Locker", Position = CFrame.new(571, 20, 174)},
    {Name = "💙DF Locker", Position = CFrame.new(870, 5, 498)},
    {Name = "🎄Wheel Spin", Position = CFrame.new(142, 4, 91)}
}

local locationNames = {}

-- Populate location names
for _, location in pairs(teleportLocations) do
    table.insert(locationNames, location.Name)
end

local selectedLocation = teleportLocations[1] -- Default location

-- Dropdown for selecting teleport location
local Dropdown = TeleportsTab:CreateDropdown({
    Name = "Select Teleport Location",
    Options = locationNames,
    CurrentOption = {locationNames[1]}, -- Default selected option
    MultipleOptions = false,
    Flag = "TeleportLocationDropdown", -- Flag for config saving
    Callback = function(Options)
        -- Update selected location based on dropdown selection
        for _, location in pairs(teleportLocations) do
            if location.Name == Options[1] then
                selectedLocation = location
                break
            end
        end
    end
})

-- Button to teleport to selected location
local TeleportButton = TeleportsTab:CreateButton({
    Name = "Teleport",
    Callback = function()
        if selectedLocation then
            -- Teleport player to selected location
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = selectedLocation.Position
        else
            warn("No location selected!")
        end
    end
})

local TeleportsSection = TeleportsTab:CreateSection("Teleports Player")

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local playerteleport = nil
local playerList = {}

local PlayerDropdown = TeleportsTab:CreateDropdown({
    Name = "Select Player",
    Options = playerList,
    Callback = function(selected)
        playerteleport = selected
    end
})

local function updatePlayerList()
    playerList = {}
    for _, player in ipairs(Players:GetPlayers()) do
        table.insert(playerList, player.Name)
    end
    PlayerDropdown:UpdateOptions(playerList)
end

-- Connect PlayerAdded and PlayerRemoving events to update the list
Players.PlayerAdded:Connect(function()
    updatePlayerList()
end)

Players.PlayerRemoving:Connect(function()
    updatePlayerList()
end)

-- Create teleport button
local Button = TeleportsTab:CreateButton({
    Name = "Teleport to Player",
    Callback = function()
        if playerteleport then
            local player = Players:FindFirstChild(playerteleport)
            if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                LocalPlayer.Character.HumanoidRootPart.CFrame = player.Character.HumanoidRootPart.CFrame
            else
                Rayfield:Notify({
                    Title = "Error",
                    Content = "Player not found or not loaded.",
                    Duration = 4,
                    Type = "Error"
                })
            end
        else
            Rayfield:Notify({
                Title = "Error",
                Content = "No player selected to teleport.",
                Duration = 4,
                Type = "Error"
            })
        end
    end
})

-- Call updatePlayerList initially to populate the dropdown when the script starts
updatePlayerList()

local MoneyTab = Window:CreateTab("Money", 4483362458) -- Title, Image ID
local MoneySection = MoneyTab:CreateSection("Pay Players")

local Button = MoneyTab:CreateButton({
   Name = "Pay 100k",
   Callback = function()
        local ChatService = game:GetService("Chat")

     
ChatService:Chat(game.Players.LocalPlayer.Character.Head, "/pay 100000", Enum.ChatColor.Blue)  
   end,
})

local Button = MoneyTab:CreateButton({
   Name = "Pay 400k",
   Callback = function()
        local ChatService = game:GetService("Chat")

     
ChatService:Chat(game.Players.LocalPlayer.Character.Head, "/pay 400000", Enum.ChatColor.Blue)  
   end,
})

local Button = MoneyTab:CreateButton({
   Name = "Pay 800k",
   Callback = function()
        local ChatService = game:GetService("Chat")

     
ChatService:Chat(game.Players.LocalPlayer.Character.Head, "/pay 800k", Enum.ChatColor.Blue)  
   end,
})

local Button = MoneyTab:CreateButton({
   Name = "Drop Cash",
   Callback = function()
        local ChatService = game:GetService("Chat")

     
ChatService:Chat(game.Players.LocalPlayer.Character.Head, "/drop", Enum.ChatColor.Blue)  
   end,
})